<script type="text/javascript">
    {{ if (theme_mode === 'auto') }}
        if (
            localStorage.theme === "dark" ||
            (!("theme" in localStorage) &&
                window.matchMedia("(prefers-color-scheme: dark)").matches)
        ) {
            document.documentElement.classList.add("dark");
            localStorage.setItem("theme", "dark");
        } else {
            document.documentElement.classList.remove("dark");
            localStorage.setItem("theme", "light");
        }
    {{ /if }}

    {{ if (theme_mode === 'light') }}
        document.documentElement.classList.remove("dark");
        localStorage.setItem("theme", "light");
    {{ /if }}

    {{ if (theme_mode === 'dark') }}
        document.documentElement.classList.add("dark");
        localStorage.setItem("theme", "dark");
    {{ /if }}
</script>